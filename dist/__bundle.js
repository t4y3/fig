!function(){"use strict";function h(e,t){for(var r=[],n=[],o=arguments.length;2<o--;)r.push(arguments[o]);for(;r.length;){var i=r.pop();if(i&&i.pop)for(o=i.length;o--;)r.push(i[o]);else null!=i&&!0!==i&&!1!==i&&n.push(i)}return"function"==typeof e?e(t||{},n):{nodeName:e,attributes:t||{},children:n,key:t&&t.key}}function app(e,t,r,n){var o,i=[].map,a=n&&n.children[0]||null,s=a&&function t(e){return{nodeName:e.nodeName.toLowerCase(),attributes:{},children:i.call(e.childNodes,function(e){return 3===e.nodeType?e.nodeValue:t(e)})}}(a),y=[],v=!0,l=_(e),c=function e(n,o,i){for(var t in i)"function"==typeof i[t]?function(e,r){i[e]=function(e){var t=r(e);return"function"==typeof t&&(t=t(h(n,l),i)),t&&t!==(o=h(n,l))&&!t.then&&f(l=p(n,_(o,t),l)),t}}(t,i[t]):e(n.concat(t),o[t]=_(o[t]),i[t]=_(i[t]));return i}([],l,_(t));return f(),c;function b(e){return"function"==typeof e?b(e(l,c)):null!=e?e:""}function u(){o=!o;var e=b(r);for(n&&!o&&(a=function e(t,r,n,o,i){if(o===n);else if(null==n||n.nodeName!==o.nodeName){var a=function e(t,r){var n="string"==typeof t||"number"==typeof t?document.createTextNode(t):(r=r||"svg"===t.nodeName)?document.createElementNS("http://www.w3.org/2000/svg",t.nodeName):document.createElement(t.nodeName);var o=t.attributes;if(o){o.oncreate&&y.push(function(){o.oncreate(n)});for(var i=0;i<t.children.length;i++)n.appendChild(e(t.children[i]=b(t.children[i]),r));for(var a in o)S(n,a,o[a],null,r)}return n}(o,i);t.insertBefore(a,r),null!=n&&E(t,r,n),r=a}else if(null==n.nodeName)r.nodeValue=o;else{!function(e,t,r,n){for(var o in _(t,r))r[o]!==("value"===o||"checked"===o?e[o]:t[o])&&S(e,o,r[o],t[o],n);var i=v?r.oncreate:r.onupdate;i&&y.push(function(){i(e,t)})}(r,n.attributes,o.attributes,i=i||"svg"===o.nodeName);for(var s={},l={},c=[],u=n.children,f=o.children,p=0;p<u.length;p++){c[p]=r.childNodes[p];var h=w(u[p]);null!=h&&(s[h]=[c[p],u[p]])}for(var p=0,d=0;d<f.length;){var h=w(u[p]),g=w(f[d]=b(f[d]));if(l[h])p++;else if(null==g||g!==w(u[p+1]))if(null==g||v)null==h&&(e(r,c[p],u[p],f[d],i),d++),p++;else{var m=s[g]||[];h===g?(e(r,m[0],m[1],f[d],i),p++):m[0]?e(r,r.insertBefore(m[0],c[p]),m[1],f[d],i):e(r,c[p],null,f[d],i),l[g]=f[d],d++}else null==h&&E(r,c[p],u[p]),p++}for(;p<u.length;)null==w(u[p])&&E(r,c[p],u[p]),p++;for(var p in s)l[p]||E(r,s[p][0],s[p][1])}return r}(n,a,s,s=e)),v=!1;y.length;)y.pop()()}function f(){o||(o=!0,setTimeout(u))}function _(e,t){var r={};for(var n in e)r[n]=e[n];for(var n in t)r[n]=t[n];return r}function p(e,t,r){var n={};return e.length?(n[e[0]]=1<e.length?p(e.slice(1),t,r[e[0]]):t,_(r,n)):t}function h(e,t){for(var r=0;r<e.length;)t=t[e[r++]];return t}function w(e){return e?e.key:null}function d(e){return e.currentTarget.events[e.type](e)}function S(e,t,r,n,o){if("key"===t);else if("style"===t)for(var i in _(n,r)){var a=null==r||null==r[i]?"":r[i];"-"===i[0]?e[t].setProperty(i,a):e[t][i]=a}else"o"===t[0]&&"n"===t[1]?(t=t.slice(2),e.events?n||(n=e.events[t]):e.events={},(e.events[t]=r)?n||e.addEventListener(t,d):e.removeEventListener(t,d)):t in e&&"list"!==t&&!o?e[t]=null==r?"":r:null!=r&&!1!==r&&e.setAttribute(t,r),null!=r&&!1!==r||e.removeAttribute(t)}function E(e,t,r){function n(){e.removeChild(function e(t,r){var n=r.attributes;if(n){for(var o=0;o<r.children.length;o++)e(t.childNodes[o],r.children[o]);n.ondestroy&&n.ondestroy(t)}return t}(t,r))}var o=r.attributes&&r.attributes.onremove;o?o(t,n):n()}}!function(e){if(!e.fetch){var t="URLSearchParams"in e,r="Symbol"in e&&"iterator"in Symbol,a="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),n="FormData"in e,o="ArrayBuffer"in e;if(o)var i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=function(e){return e&&DataView.prototype.isPrototypeOf(e)},l=ArrayBuffer.isView||function(e){return e&&-1<i.indexOf(Object.prototype.toString.call(e))};d.prototype.append=function(e,t){e=f(e),t=p(t);var r=this.map[e];this.map[e]=r?r+","+t:t},d.prototype.delete=function(e){delete this.map[f(e)]},d.prototype.get=function(e){return e=f(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(f(e))},d.prototype.set=function(e,t){this.map[f(e)]=p(t)},d.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},d.prototype.keys=function(){var r=[];return this.forEach(function(e,t){r.push(t)}),h(r)},d.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),h(t)},d.prototype.entries=function(){var r=[];return this.forEach(function(e,t){r.push([t,e])}),h(r)},r&&(d.prototype[Symbol.iterator]=d.prototype.entries);var c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];_.prototype.clone=function(){return new _(this,{body:this._bodyInit})},b.call(_.prototype),b.call(S.prototype),S.prototype.clone=function(){return new S(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},S.error=function(){var e=new S(null,{status:0,statusText:""});return e.type="error",e};var u=[301,302,303,307,308];S.redirect=function(e,t){if(-1===u.indexOf(t))throw new RangeError("Invalid status code");return new S(null,{status:t,headers:{location:e}})},e.Headers=d,e.Request=_,e.Response=S,e.fetch=function(r,o){return new Promise(function(n,e){var t=new _(r,o),i=new XMLHttpRequest;i.onload=function(){var e,o,t={status:i.status,statusText:i.statusText,headers:(e=i.getAllResponseHeaders()||"",o=new d,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var t=e.split(":"),r=t.shift().trim();if(r){var n=t.join(":").trim();o.append(r,n)}}),o)};t.url="responseURL"in i?i.responseURL:t.headers.get("X-Request-URL");var r="response"in i?i.response:i.responseText;n(new S(r,t))},i.onerror=function(){e(new TypeError("Network request failed"))},i.ontimeout=function(){e(new TypeError("Network request failed"))},i.open(t.method,t.url,!0),"include"===t.credentials?i.withCredentials=!0:"omit"===t.credentials&&(i.withCredentials=!1),"responseType"in i&&a&&(i.responseType="blob"),t.headers.forEach(function(e,t){i.setRequestHeader(t,e)}),i.send(void 0===t._bodyInit?null:t._bodyInit)})},e.fetch.polyfill=!0}function f(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function p(e){return"string"!=typeof e&&(e=String(e)),e}function h(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return r&&(e[Symbol.iterator]=function(){return e}),e}function d(t){this.map={},t instanceof d?t.forEach(function(e,t){this.append(t,e)},this):Array.isArray(t)?t.forEach(function(e){this.append(e[0],e[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function g(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function m(r){return new Promise(function(e,t){r.onload=function(){e(r.result)},r.onerror=function(){t(r.error)}})}function y(e){var t=new FileReader,r=m(t);return t.readAsArrayBuffer(e),r}function v(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e)if("string"==typeof e)this._bodyText=e;else if(a&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(n&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(o&&a&&s(e))this._bodyArrayBuffer=v(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!o||!ArrayBuffer.prototype.isPrototypeOf(e)&&!l(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=v(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var e=g(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?g(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(y)}),this.text=function(){var e,t,r,n=g(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,r=m(t),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},n&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}function _(e,t){var r,n,o=(t=t||{}).body;if(e instanceof _){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new d(t.headers)),this.method=(r=t.method||this.method||"GET",n=r.toUpperCase(),-1<c.indexOf(n)?n:r),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function w(e){var o=new FormData;return e.trim().split("&").forEach(function(e){if(e){var t=e.split("="),r=t.shift().replace(/\+/g," "),n=t.join("=").replace(/\+/g," ");o.append(decodeURIComponent(r),decodeURIComponent(n))}}),o}function S(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:void 0);var FigTree=function(e){var n=e.state,o=e.action;return h("div",{className:"fig-tree"},h("div",{className:"title"},n.title),h("ul",{className:"list"},n.figures.map(function(e,r){return h("li",{className:"list__item"},h("p",{className:"tag-title "+(r==n.pi?"tag-title--active":""),onclick:function(){o.toggleTreeAccordion(r)}},e.name,h("i",{className:"material-icons "+(n.figuresOpen[r]?"hide":"")},"keyboard_arrow_right"),h("i",{className:"material-icons "+(n.figuresOpen[r]?"":"hide")},"keyboard_arrow_down")),h("div",{className:"tag-list "+(n.figuresOpen[r]?"":"hide")},e.list.map(function(e,t){return h("p",{className:"tag-list__item "+(r==n.pi&&t==n.ci?"tag-list__item--active":""),onclick:function(){o.changeTree([r,t])}},e.name)})))})))},openDialog=function(){document.getElementById("modal-shortcuts").showModal()},closeDialog=function(){document.getElementById("modal-shortcuts").close()},FigHeader=function(e){var t=e.state;return h("div",{className:"fig-header"},h("i",{className:"material-icons md-18"},"pageview"),h("span",{className:"header-text"},t.figures[t.pi].name," - ",t.figures[t.pi].list[t.ci].name),h("div",{className:"header-logo"},h("i",{className:"header-logo__keybord material-icons",onclick:openDialog},"keyboard")),h("dialog",{id:"modal-shortcuts",className:"modal-shortcuts",onclick:closeDialog},h("p",{className:"modal-shortcuts__title"},"Keyboard Shortcuts"),h("p",{className:"modal-shortcuts__item"},h("span",null,"⌘ ⇧ ←"),"Toggle Tree View"),h("p",{className:"modal-shortcuts__item"},h("span",null,"⌘ ⇧ →"),"Toggle Info View"),h("p",{className:"modal-shortcuts__item"},h("span",null,"↑ or ↓"),"Change View Custom Tag"),h("p",{className:"modal-shortcuts__item"},h("span",null,"← or →"),"Toggle Accordion")))},format=function(e,t,r){var n=new JSONView(r,t);n.expand(!0),e.innerHTML="",e.appendChild(n.dom)},startX=0,infoWidth=600,startWidth=0,onDragstart=function(e,t,r){startX=e.clientX,startWidth=infoWidth},onDrag=function(e,t,r){e.preventDefault();var n=startWidth+(startX-e.clientX);if(!(0===e.clientX||n<=300)){infoWidth=n;var o=document.getElementById("fig-info");o.style.flexBasis=n+"px",o.style.maxWidth=n+"px"}},FigInfo=function(e){var n=e.state,t=e.action;return h("div",{id:"fig-info",className:"fig-info "+(n.isInfo?"":"hide")},h("div",{className:"info-inner"},h("div",{className:"info-title"},n.figures[n.pi].name," - ",n.figures[n.pi].list[n.ci].name),h("div",{className:"code-inner"},h("p",null,"Source"),h("pre",null,h("code",{className:"html",innerHTML:hljs.highlight("html",n.figures[n.pi].list[n.ci].template).value}))),h("div",{className:"opts-inner"},h("p",null,"Opts"),h("div",{className:"table-inner"},h("table",null,h("thead",null,h("tr",null,h("th",{width:"85%"},"Value"))),n.figures.map(function(e,t){return e.list.map(function(r,e){return h("tbody",{className:n.pi==t&&n.ci==e?"":"hide"},Object.keys(r._opts).map(function(t){return h("tr",null,h("td",{width:"85%"},h("div",{oncreate:function(e){format(e,r._opts[t],t)}})))}))})}))))),h("div",{className:"sidebar-gutter"}),h("div",{className:"sidebar-gutter--dummy",draggable:"true",ondragstart:function(e){onDragstart(e,n,t)},ondrag:function(e){onDrag(e,n,t)}}))},loadedCallback=function(e){var t=e.target.contentDocument||e.target.contentWindow.document,r=document.createElement("link");r.href="css/iframe.css",r.type="text/css",r.rel="stylesheet",t.querySelector("head").appendChild(r)},getSrcTemplate=function(e,t,r){var n=e.figures[t].list[r],o=n.template,i=n.template.match(/{(.*?)}/g);if(i){i=i.map(function(e){return e.match(/{ (.*?) }/)[1]});for(var a=0;a<i.length;a++)if(n._opts[i[a]]){var s=new RegExp("({ )"+i[a]+"( })"),l=JSON.stringify(n._opts[i[a]]).replace(/"/g,"'");o=o.replace(s,"$1"+l+"$2")}}var c='<script type="text/javascript" src="'+e.bundle+'"><\/script>';return'\n    <!DOCTYPE html>\n    <html>\n      <head>\n        <meta charset="utf-8">\n        '+e.headHtml+"\n        "+c+'\n      </head>\n      <body><div class="fig-inner fig-inner--center">'+o+"</div></body>\n    </html>"},FigView=function(e){var n=e.state;return h("div",{className:"fig-view"},h("div",{className:"view-inner"},n.figures.map(function(e,r){return e.list.map(function(e,t){return h("iframe",{width:"100%",sandbox:"allow-scripts allow-same-origin",className:"view-frame "+(n.pi==r&&n.ci==t?"":"hide"),srcdoc:getSrcTemplate(n,r,t),onload:function(e){loadedCallback(e)}})})})))},FigApp=function(e){var t=e.state,r=e.actions;return h("div",{className:"fig-app"},h("div",{className:"app-inner"},h("div",{className:"app-left "+(t.isTree?"":"hide")},h(FigTree,{state:t,action:r})),h("div",{className:"app-right"},h(FigHeader,{state:t}),h("div",{className:"app-right-top"},h(FigView,{state:t}),h(FigInfo,{state:t,action:r})))))},KEY_EVENTS={TOGGLE_TREE:"command+shift+left",TOGGLE_INFO:"command+shift+right",MOVE_UP:"up",MOVE_DOWN:"down",MOVE_LEFT:"left",MOVE_RIGHT:"right"},STORAGE_KEY="fig-state",commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var mousetrap=createCommonjsModule(function(u){!function(e,n,t){if(e){for(var o,i={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},r={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},s={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},l={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},a=1;a<20;++a)i[111+a]="f"+a;for(a=0;a<=9;++a)i[a+96]=a.toString();S.prototype.bind=function(e,t,r){return e=e instanceof Array?e:[e],this._bindMultiple.call(this,e,t,r),this},S.prototype.unbind=function(e,t){return this.bind.call(this,e,function(){},t)},S.prototype.trigger=function(e,t){return this._directMap[e+":"+t]&&this._directMap[e+":"+t]({},e),this},S.prototype.reset=function(){return this._callbacks={},this._directMap={},this},S.prototype.stopCallback=function(e,t){return!(-1<(" "+t.className+" ").indexOf(" mousetrap "))&&(!function e(t,r){return null!==t&&t!==n&&(t===r||e(t.parentNode,r))}(t,this.target)&&("INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable))},S.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},S.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);o=null},S.init=function(){var t=S(n);for(var e in t)"_"!==e.charAt(0)&&(S[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))},S.init(),e.Mousetrap=S,u.exports&&(u.exports=S)}function v(e,t,r){e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent("on"+t,r)}function b(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return i[e.which]?i[e.which]:r[e.which]?r[e.which]:String.fromCharCode(e.which).toLowerCase()}function _(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function c(e,t,r){return r||(r=function(){if(!o)for(var e in o={},i)95<e&&e<112||i.hasOwnProperty(e)&&(o[i[e]]=e);return o}()[e]?"keydown":"keypress"),"keypress"==r&&t.length&&(r="keydown"),r}function w(e,t){var r,n,o,i,a=[];for(r="+"===(i=e)?["+"]:(i=i.replace(/\+{2}/g,"+plus")).split("+"),o=0;o<r.length;++o)n=r[o],l[n]&&(n=l[n]),t&&"keypress"!=t&&s[n]&&(n=s[n],a.push("shift")),_(n)&&a.push(n);return{key:n,modifiers:a,action:t=c(n,a,t)}}function S(e){var d=this;if(e=e||n,!(d instanceof S))return new S(e);d.target=e,d._callbacks={},d._directMap={};var l,g={},c=!1,u=!1,f=!1;function p(e){e=e||{};var t,r=!1;for(t in g)e[t]?r=!0:g[t]=0;r||(f=!1)}function h(e,t,r,n,o,i){var a,s,l,c,u=[],f=r.type;if(!d._callbacks[e])return[];for("keyup"==f&&_(e)&&(t=[e]),a=0;a<d._callbacks[e].length;++a)if(s=d._callbacks[e][a],(n||!s.seq||g[s.seq]==s.level)&&f==s.action&&("keypress"==f&&!r.metaKey&&!r.ctrlKey||(l=t,c=s.modifiers,l.sort().join(",")===c.sort().join(",")))){var p=!n&&s.combo==o,h=n&&s.seq==n&&s.level==i;(p||h)&&d._callbacks[e].splice(a,1),u.push(s)}return u}function m(e,t,r,n){var o,i;d.stopCallback(t,t.target||t.srcElement,r,n)||!1===e(t,r)&&((i=t).preventDefault?i.preventDefault():i.returnValue=!1,(o=t).stopPropagation?o.stopPropagation():o.cancelBubble=!0)}function t(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t,r,n=b(e);n&&("keyup"!=e.type||c!==n?d.handleKey(n,(r=[],(t=e).shiftKey&&r.push("shift"),t.altKey&&r.push("alt"),t.ctrlKey&&r.push("ctrl"),t.metaKey&&r.push("meta"),r),e):c=!1)}function s(t,e,r,n){function o(e){return function(){f=e,++g[t],clearTimeout(l),l=setTimeout(p,1e3)}}function i(e){m(r,e,t),"keyup"!==n&&(c=b(e)),setTimeout(p,10)}for(var a=g[t]=0;a<e.length;++a){var s=a+1===e.length?i:o(n||w(e[a+1]).action);y(e[a],s,n,t,a)}}function y(e,t,r,n,o){d._directMap[e+":"+r]=t;var i,a=(e=e.replace(/\s+/g," ")).split(" ");1<a.length?s(e,a,t,r):(i=w(e,r),d._callbacks[i.key]=d._callbacks[i.key]||[],h(i.key,i.modifiers,{type:i.action},n,e,o),d._callbacks[i.key][n?"unshift":"push"]({callback:t,modifiers:i.modifiers,action:i.action,seq:n,level:o,combo:e}))}d._handleKey=function(e,t,r){var n,o=h(e,t,r),i={},a=0,s=!1;for(n=0;n<o.length;++n)o[n].seq&&(a=Math.max(a,o[n].level));for(n=0;n<o.length;++n)if(o[n].seq){if(o[n].level!=a)continue;s=!0,i[o[n].seq]=1,m(o[n].callback,r,o[n].combo,o[n].seq)}else s||m(o[n].callback,r,o[n].combo);var l="keypress"==r.type&&u;r.type!=f||_(e)||l||p(i),u=s&&"keydown"==r.type},d._bindMultiple=function(e,t,r){for(var n=0;n<e.length;++n)y(e[n],t,r)},v(e,"keypress",t),v(e,"keydown",t),v(e,"keyup",t)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)}),assign=make_assign(),create=make_create(),trim=make_trim(),Global="undefined"!=typeof window?window:commonjsGlobal,util={assign:assign,create:create,trim:trim,bind:bind,slice:slice,each:each,map:map,pluck:pluck,isList:isList,isFunction:isFunction,isObject:isObject,Global:Global};function make_assign(){return Object.assign?Object.assign:function(r,e,t,n){for(var o=1;o<arguments.length;o++)each(Object(arguments[o]),function(e,t){r[t]=e});return r}}function make_create(){if(Object.create)return function(e,t,r,n){var o=slice(arguments,1);return assign.apply(this,[Object.create(e)].concat(o))};var i=function(){};return function(e,t,r,n){var o=slice(arguments,1);return i.prototype=e,assign.apply(this,[new i].concat(o))}}function make_trim(){return String.prototype.trim?function(e){return String.prototype.trim.call(e)}:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}function bind(e,t){return function(){return t.apply(e,Array.prototype.slice.call(arguments,0))}}function slice(e,t){return Array.prototype.slice.call(e,t||0)}function each(e,r){pluck(e,function(e,t){return r(e,t),!1})}function map(e,r){var n=isList(e)?[]:{};return pluck(e,function(e,t){return n[t]=r(e,t),!1}),n}function pluck(e,t){if(isList(e)){for(var r=0;r<e.length;r++)if(t(e[r],r))return e[r]}else for(var n in e)if(e.hasOwnProperty(n)&&t(e[n],n))return e[n]}function isList(e){return null!=e&&"function"!=typeof e&&"number"==typeof e.length}function isFunction(e){return e&&"[object Function]"==={}.toString.call(e)}function isObject(e){return e&&"[object Object]"==={}.toString.call(e)}var slice$1=util.slice,pluck$1=util.pluck,each$1=util.each,bind$1=util.bind,create$1=util.create,isList$1=util.isList,isFunction$1=util.isFunction,isObject$1=util.isObject,storeEngine={createStore:_createStore},storeAPI={version:"2.0.12",enabled:!1,get:function(e,t){var r=this.storage.read(this._namespacePrefix+e);return this._deserialize(r,t)},set:function(e,t){return void 0===t?this.remove(e):(this.storage.write(this._namespacePrefix+e,this._serialize(t)),t)},remove:function(e){this.storage.remove(this._namespacePrefix+e)},each:function(r){var n=this;this.storage.each(function(e,t){r.call(n,n._deserialize(e),(t||"").replace(n._namespaceRegexp,""))})},clearAll:function(){this.storage.clearAll()},hasNamespace:function(e){return this._namespacePrefix=="__storejs_"+e+"_"},createStore:function(){return _createStore.apply(this,arguments)},addPlugin:function(e){this._addPlugin(e)},namespace:function(e){return _createStore(this.storage,this.plugins,e)}};function _warn(){var e="undefined"==typeof console?null:console;e&&(e.warn?e.warn:e.log).apply(e,arguments)}function _createStore(e,t,r){r||(r=""),e&&!isList$1(e)&&(e=[e]),t&&!isList$1(t)&&(t=[t]);var n=r?"__storejs_"+r+"_":"",o=r?new RegExp("^"+n):null;if(!/^[a-zA-Z0-9_\-]*$/.test(r))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var i=create$1({_namespacePrefix:n,_namespaceRegexp:o,_testStorage:function(e){try{var t="__storejs__test__";e.write(t,t);var r=e.read(t)===t;return e.remove(t),r}catch(e){return!1}},_assignPluginFnProp:function(n,e){var o=this[e];this[e]=function(){var r=slice$1(arguments,0),e=this;var t=[function(){if(o)return each$1(arguments,function(e,t){r[t]=e}),o.apply(e,r)}].concat(r);return n.apply(e,t)}},_serialize:function(e){return JSON.stringify(e)},_deserialize:function(t,e){if(!t)return e;var r="";try{r=JSON.parse(t)}catch(e){r=t}return void 0!==r?r:e},_addStorage:function(e){this.enabled||this._testStorage(e)&&(this.storage=e,this.enabled=!0)},_addPlugin:function(r){var n=this;if(isList$1(r))each$1(r,function(e){n._addPlugin(e)});else if(!pluck$1(this.plugins,function(e){return r===e})){if(this.plugins.push(r),!isFunction$1(r))throw new Error("Plugins must be function values that return objects");var e=r.call(this);if(!isObject$1(e))throw new Error("Plugins must return an object of function properties");each$1(e,function(e,t){if(!isFunction$1(e))throw new Error("Bad plugin property: "+t+" from plugin "+r.name+". Plugins should only return functions.");n._assignPluginFnProp(e,t)})}},addStorage:function(e){_warn("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(e)}},storeAPI,{plugins:[]});return i.raw={},each$1(i,function(e,t){isFunction$1(e)&&(i.raw[t]=bind$1(i,e))}),each$1(e,function(e){i._addStorage(e)}),each$1(t,function(e){i._addPlugin(e)}),i}var Global$1=util.Global,localStorage_1={name:"localStorage",read:read,write:write,each:each$2,remove:remove,clearAll:clearAll};function localStorage(){return Global$1.localStorage}function read(e){return localStorage().getItem(e)}function write(e,t){return localStorage().setItem(e,t)}function each$2(e){for(var t=localStorage().length-1;0<=t;t--){var r=localStorage().key(t);e(read(r),r)}}function remove(e){return localStorage().removeItem(e)}function clearAll(){return localStorage().clear()}var Global$2=util.Global,oldFFGlobalStorage={name:"oldFF-globalStorage",read:read$1,write:write$1,each:each$3,remove:remove$1,clearAll:clearAll$1},globalStorage=Global$2.globalStorage;function read$1(e){return globalStorage[e]}function write$1(e,t){globalStorage[e]=t}function each$3(e){for(var t=globalStorage.length-1;0<=t;t--){var r=globalStorage.key(t);e(globalStorage[r],r)}}function remove$1(e){return globalStorage.removeItem(e)}function clearAll$1(){each$3(function(e,t){delete globalStorage[e]})}var Global$3=util.Global,oldIEUserDataStorage={name:"oldIE-userDataStorage",write:write$2,read:read$2,each:each$4,remove:remove$2,clearAll:clearAll$2},storageName="storejs",doc=Global$3.document,_withStorageEl=_makeIEStorageElFunction(),disable=(Global$3.navigator?Global$3.navigator.userAgent:"").match(/ (MSIE 8|MSIE 9|MSIE 10)\./);function write$2(e,t){if(!disable){var r=fixKey(e);_withStorageEl(function(e){e.setAttribute(r,t),e.save(storageName)})}}function read$2(e){if(!disable){var t=fixKey(e),r=null;return _withStorageEl(function(e){r=e.getAttribute(t)}),r}}function each$4(o){_withStorageEl(function(e){for(var t=e.XMLDocument.documentElement.attributes,r=t.length-1;0<=r;r--){var n=t[r];o(e.getAttribute(n.name),n.name)}})}function remove$2(e){var t=fixKey(e);_withStorageEl(function(e){e.removeAttribute(t),e.save(storageName)})}function clearAll$2(){_withStorageEl(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(storageName);for(var r=t.length-1;0<=r;r--)e.removeAttribute(t[r].name);e.save(storageName)})}var forbiddenCharsRegex=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");function fixKey(e){return e.replace(/^\d/,"___$&").replace(forbiddenCharsRegex,"___")}function _makeIEStorageElFunction(){if(!doc||!doc.documentElement||!doc.documentElement.addBehavior)return null;var r,e,n;try{(e=new ActiveXObject("htmlfile")).open(),e.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></iframe>'),e.close(),r=e.w.frames[0].document,n=r.createElement("div")}catch(e){n=doc.createElement("div"),r=doc.body}return function(e){var t=[].slice.call(arguments,0);t.unshift(n),r.appendChild(n),n.addBehavior("#default#userData"),n.load(storageName),e.apply(this,t),r.removeChild(n)}}var Global$4=util.Global,trim$1=util.trim,cookieStorage={name:"cookieStorage",read:read$3,write:write$3,each:each$5,remove:remove$3,clearAll:clearAll$3},doc$1=Global$4.document;function read$3(e){if(!e||!_has(e))return null;var t="(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(doc$1.cookie.replace(new RegExp(t),"$1"))}function each$5(e){for(var t=doc$1.cookie.split(/; ?/g),r=t.length-1;0<=r;r--)if(trim$1(t[r])){var n=t[r].split("="),o=unescape(n[0]);e(unescape(n[1]),o)}}function write$3(e,t){e&&(doc$1.cookie=escape(e)+"="+escape(t)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/")}function remove$3(e){e&&_has(e)&&(doc$1.cookie=escape(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function clearAll$3(){each$5(function(e,t){remove$3(t)})}function _has(e){return new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(doc$1.cookie)}var Global$5=util.Global,sessionStorage_1={name:"sessionStorage",read:read$4,write:write$4,each:each$6,remove:remove$4,clearAll:clearAll$4};function sessionStorage(){return Global$5.sessionStorage}function read$4(e){return sessionStorage().getItem(e)}function write$4(e,t){return sessionStorage().setItem(e,t)}function each$6(e){for(var t=sessionStorage().length-1;0<=t;t--){var r=sessionStorage().key(t);e(read$4(r),r)}}function remove$4(e){return sessionStorage().removeItem(e)}function clearAll$4(){return sessionStorage().clear()}var memoryStorage_1={name:"memoryStorage",read:read$5,write:write$5,each:each$7,remove:remove$5,clearAll:clearAll$5},memoryStorage={};function read$5(e){return memoryStorage[e]}function write$5(e,t){memoryStorage[e]=t}function each$7(e){for(var t in memoryStorage)memoryStorage.hasOwnProperty(t)&&e(memoryStorage[t],t)}function remove$5(e){delete memoryStorage[e]}function clearAll$5(e){memoryStorage={}}var all=[localStorage_1,oldFFGlobalStorage,oldIEUserDataStorage,cookieStorage,sessionStorage_1,memoryStorage_1],_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};"object"!==("undefined"==typeof JSON?"undefined":_typeof(JSON))&&(JSON={}),function(){var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta,rep;function f(e){return e<10?"0"+e:e}function this_value(){return this.valueOf()}function quote(e){return rx_escapable.lastIndex=0,rx_escapable.test(e)?'"'+e.replace(rx_escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var r,n,o,i,a,s=gap,l=t[e];switch(l&&"object"===(void 0===l?"undefined":_typeof(l))&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),void 0===l?"undefined":_typeof(l)){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(i=l.length,r=0;r<i;r+=1)a[r]=str(r,l)||"null";return o=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,o}if(rep&&"object"===(void 0===rep?"undefined":_typeof(rep)))for(i=rep.length,r=0;r<i;r+=1)"string"==typeof rep[r]&&(o=str(n=rep[r],l))&&a.push(quote(n)+(gap?": ":":")+o);else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(o=str(n,l))&&a.push(quote(n)+(gap?": ":":")+o);return o=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value),"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,r){var n;if(indent=gap="","number"==typeof r)for(n=0;n<r;n+=1)indent+=" ";else"string"==typeof r&&(indent=r);if((rep=t)&&"function"!=typeof t&&("object"!==(void 0===t?"undefined":_typeof(t))||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(e,t){var r,n,o=e[t];if(o&&"object"===(void 0===o?"undefined":_typeof(o)))for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(void 0!==(n=walk(o,r))?o[r]=n:delete o[r]);return reviver.call(e,t,o)}if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();var json2=json2Plugin;function json2Plugin(){return{}}var plugins=[json2],store_legacy=storeEngine.createStore(all,plugins),state={bundle:"",headHtml:"",isTree:!0,isInfo:!0,pi:0,ci:0,figures:[],figuresOpen:[],title:"Fig"},actions={initState:function(g){return function(e){for(var t=store_legacy.get(STORAGE_KEY),r=g.bundle,n=e.isTree,o=e.isInfo,i=e.pi,a=e.ci,s=[],l=0;l<g.figures.length;l++)s[l]=!0;var c=g.title||e.title;t&&(n=t.isTree,o=t.isInfo,s.length==g.figures.length&&t.figuresOpen&&(s=t.figuresOpen),g.figures[t.pi]&&g.figures[t.pi].list[t.ci]&&(i=t.pi,a=t.ci));for(var u=location.search.substring(1).split("&"),f={},p=0;u[p];p++){var h=u[p].split("=");f[h[0]]=h[1]}f.pi&&f.ci&&g.figures[f.pi]&&g.figures[f.pi].list[f.ci]&&(i=f.pi,a=f.ci);var d=Object.assign({},e,{bundle:r,headHtml:g.headHtml,isTree:n,isInfo:o,pi:i,ci:a,figures:g.figures,figuresOpen:s,title:c});return store_legacy.set(STORAGE_KEY,d),d}},changeTree:function(r){return function(e){var t=Object.assign({},e,{pi:r[0],ci:r[1]});return store_legacy.set(STORAGE_KEY,t),window.history.pushState({},null,"?pi="+r[0]+"&ci="+r[1]),t}},toggleTree:function(){return function(e){var t=Object.assign({},e,{isTree:!e.isTree,isInfo:e.isInfo});return store_legacy.set(STORAGE_KEY,t),t}},toggleTreeAccordion:function(n){return function(e){var t=e.figuresOpen;t[n]=!t[n];var r=Object.assign({},e,{figuresOpen:t});return store_legacy.set(STORAGE_KEY,r),r}},toggleInfo:function(){return function(e){var t=Object.assign({},e,{isTree:e.isTree,isInfo:!e.isInfo});return store_legacy.set(STORAGE_KEY,t),t}},moveFocusedTag:function(o){return function(e){var t=e.pi,r="up"===o?e.ci-1:e.ci+1;r<0?e.pi-1<0?(t=e.pi,r=e.ci):(t-=1,r=e.figures[e.pi-1].list.length-1):r>e.figures[e.pi].list.length-1&&(e.pi+1>e.figures.length-1?(t=e.pi,r=e.ci):(t+=1,r=0));var n=Object.assign({},e,{pi:t,ci:r});return store_legacy.set(STORAGE_KEY,n),window.history.pushState({},null,"?pi="+t+"&ci="+r),n}},openTreeAccordion:function(n){return function(e){var t=e.figuresOpen;t[e.pi]=n;var r=Object.assign({},e,{figuresOpen:t});return store_legacy.set(STORAGE_KEY,r),r}}};mousetrap.bind(KEY_EVENTS.TOGGLE_INFO,function(){main.toggleInfo()}),mousetrap.bind(KEY_EVENTS.TOGGLE_TREE,function(){main.toggleTree()}),mousetrap.bind(KEY_EVENTS.MOVE_DOWN,function(e){e.preventDefault(),main.moveFocusedTag("down")}),mousetrap.bind(KEY_EVENTS.MOVE_UP,function(e){e.preventDefault(),main.moveFocusedTag("up")}),mousetrap.bind(KEY_EVENTS.MOVE_LEFT,function(e){e.preventDefault(),main.openTreeAccordion(!1)}),mousetrap.bind(KEY_EVENTS.MOVE_RIGHT,function(e){e.preventDefault(),main.openTreeAccordion(!0)});var view=function(e,t){return h(FigApp,{state:e,actions:t})},main=void 0;window.addEventListener("DOMContentLoaded",function(){main=app(state,actions,view,document.body),fetch("fig.config.json").then(function(e){return e.json()}).then(function(e){main.initState(e)})})}();
